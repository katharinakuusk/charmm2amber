# Procedure of force field generation
## Lipid generation
The amber lipid is generation using tleap in folder [`generation`](https://github.com/xiki-tempula/gmx_lipid17.ff/tree/master/generation_validation/generation). The tleap
input file is generated with `amber_input.py`

```bash
cd generation
python amber_input.py
tleap -f tleap.in > tleap.out
```

After the successful generation of all the lipids in amber format, the files are
converted to gromacs topology and coordinate file with ParmEd.

```bash
python parmed_conversion.py
```

## Force field generation
The gromacs topology generated by ParmEd 3.2 are then condensed into a compact
force field, where bonds are condensed to bondtypes, so does the angles and
dihedrals. This step is done in the folder [`conversion`](https://github.com/xiki-tempula/gmx_lipid17.ff/tree/master/generation_validation/conversion).

```bash
cd ../conversion
python main.py
```

## Force field validation
The validation of the generated force field is tested against the original amber
implementation in the folder [`validation`](https://github.com/xiki-tempula/gmx_lipid17.ff/tree/master/generation_validation/validation).

```bash
cd ../validation
python validate.py
```

The log of the energy difference is recorded in `validation/energy_difference.log`.
Though the total potential may vary for a bit for some lipids due to the different
implementation of the non-bonded interactions, the bond, angle, dihedral
potential are all very close (< 0.1 kcal/mol).
